import { Markup } from 'telegraf'
import { ReplyKeyboardMarkup } from 'telegraf/typings/core/types/typegram'

interface Level {
  title_ru: string
  title_en: string
}

export const levels: Record<number, Level> = {
  1: {
    title_ru: 'ğŸ§  ĞœĞ¾Ğ·Ğ³ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°',
    title_en: 'ğŸ§  Avatar Brain',
  },
  2: {
    title_ru: 'ğŸ’­ Ğ§Ğ°Ñ‚ Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ¾Ğ¼',
    title_en: 'ğŸ’­ Chat with avatar',
  },
  3: {
    title_ru: 'ğŸ¤– Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ˜Ğ˜',
    title_en: 'ğŸ¤– Choose AI Model',
  },
  4: {
    title_ru: 'ğŸ¤– Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾Ğµ Ñ‚ĞµĞ»Ğ¾',
    title_en: 'ğŸ¤– Digital Body',
  },
  5: {
    title_ru: 'ğŸ“¸ ĞĞµĞ¹Ñ€Ğ¾Ñ„Ğ¾Ñ‚Ğ¾',
    title_en: 'ğŸ“¸ NeuroPhoto',
  },
  6: {
    title_ru: 'ğŸ” ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ¸Ğ· Ñ„Ğ¾Ñ‚Ğ¾',
    title_en: 'ğŸ” Prompt from Photo',
  },
  7: {
    title_ru: 'ğŸ¤ Ğ“Ğ¾Ğ»Ğ¾Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°',
    title_en: 'ğŸ¤ Avatar Voice',
  },
  8: {
    title_ru: 'ğŸ™ï¸ Ğ¢ĞµĞºÑÑ‚ Ğ² Ğ³Ğ¾Ğ»Ğ¾Ñ',
    title_en: 'ğŸ™ï¸ Text to Voice',
  },
  9: {
    title_ru: 'ğŸ¥ Ğ¤Ğ¾Ñ‚Ğ¾ Ğ² Ğ²Ğ¸Ğ´ĞµĞ¾',
    title_en: 'ğŸ¥ Photo to Video',
  },
  10: {
    title_ru: 'ğŸ¥ Ğ’Ğ¸Ğ´ĞµĞ¾ Ğ¸Ğ· Ñ‚ĞµĞºÑÑ‚Ğ°',
    title_en: 'ğŸ¥ Text to Video',
  },
  11: {
    title_ru: 'ğŸ–¼ï¸ Ğ¢ĞµĞºÑÑ‚ Ğ² Ñ„Ğ¾Ñ‚Ğ¾',
    title_en: 'ğŸ–¼ï¸ Text to Image',
  },
  99: {
    title_ru: 'ğŸ® ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ',
    title_en: 'ğŸ® Start learning',
  },
  100: {
    title_ru: 'ğŸ’ ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ',
    title_en: 'ğŸ’ Top up balance',
  },
  101: {
    title_ru: 'ğŸ¤‘ Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ',
    title_en: 'ğŸ¤‘ Balance',
  },
  102: {
    title_ru: 'ğŸ‘¥ ĞŸÑ€Ğ¸Ğ³Ğ»Ğ°ÑĞ¸Ñ‚ÑŒ Ğ´Ñ€ÑƒĞ³Ğ°',
    title_en: 'ğŸ‘¥ Invite a friend',
  },
}

export async function mainMenu(
  isRu: boolean,
  inviteCount: number,
  vip = false
): Promise<Markup.Markup<ReplyKeyboardMarkup>> {
  console.log('CASE: mainMenu')

  const availableLevels = Object.keys(levels)
    .filter(level => vip || parseInt(level) <= inviteCount)
    .map(level => levels[parseInt(level)])

  const buttons = availableLevels.map(level =>
    Markup.button.text(isRu ? level.title_ru : level.title_en)
  )

  // Ğ Ğ°Ğ·Ğ±Ğ¸Ğ²Ğ°ĞµĞ¼ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ½Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ¸ Ğ¿Ğ¾ Ğ´Ğ²Ğµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸
  const buttonRows = []
  for (let i = 0; i < buttons.length; i += 2) {
    buttonRows.push(buttons.slice(i, i + 2))
  }

  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ² ĞºĞ¾Ğ½Ñ†Ğµ
  buttonRows.push([
    Markup.button.text(isRu ? 'ğŸ’ ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ' : 'ğŸ’ Top up balance'),
    // Markup.button.text(isRu ? 'ğŸ® ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ' : 'ğŸ® Start learning'),
  ])

  return Markup.keyboard(buttonRows).resize()
}
